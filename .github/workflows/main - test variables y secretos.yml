name: test variables y secretos

on:
  push:
    branches:
      - main

jobs:
  variablesEntornoCodigo:
    runs-on: ubuntu-latest
    env:
      v1: 'variable desde codigo'
    steps:
      - run: echo variable dede codigo ${{ env.v1 }}

  variablesEntornoConfigRepo:
    needs: variablesEntornoCodigo
    runs-on: ubuntu-latest    
    steps:
      - run: echo variable desde repo ${{ vars.V2 }}

  secretosNivelRepo:
    runs-on: ubuntu-latest
    needs: variablesEntornoCodigo
    steps:
      - run: echo secreto S1 ${{ secrets.S1 }}

  secretosNivelRepoEnv:
    needs: secretosNivelRepo
    environment: test
    runs-on: ubuntu-latest    
    steps:      
      - run: echo secreto S1 ${{ secrets.S1 }}      
      - run: echo secreto S2 no existe a nivel entorno ${{ secrets.S2 }}